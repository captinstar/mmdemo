<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>控制面板</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#"><i class="fas fa-tachometer-alt"></i> <span
                    id="dashboardTitle">系统控制台</span></a>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="/dashboard"><i class="fas fa-home"></i> 首页</a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="handleLogout(event)">
                            <i class="fas fa-sign-out-alt"></i> 退出
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4" id="dashboardContent">
        <!-- 仪表盘内容将通过API动态加载 -->
    </div>
    <script src="static/js/api-config.js"></script>
    <script>
        async function loadDashboardData() {
            try {
                const response = await API.makeRequest('/dashboard');
                if (response.success) {
                    const dashboardData = response.dashboardData;
                    document.getElementById('dashboardTitle').textContent = dashboardData.title;
                    // 构建仪表盘内容
                }
            } catch (error) {
                // 错误处理已经在 API.makeRequest 中完成
            }
        }

        async function handleLogout(event) {
            event.preventDefault();
            try {
                const response = await API.makeRequest('/logout');
                if (response.success) {
                    window.location.href = '${BASE_PATH}/login';
                }
            } catch (error) {
                // 错误处理已经在 API.makeRequest 中完成
            }
        }

        // 页面加载时获取仪表盘数据
        loadDashboardData();
    </script>
</body>
</html>